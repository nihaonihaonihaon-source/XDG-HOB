local UIS=game:GetService("UserInputService")local RS=game:GetService("RunService")local P=game:GetService("Players")local CAS=game:GetService("ContextActionService")local plr=P.LocalPlayer local char=plr.Character or plr.CharacterAdded:Wait()local hrp=char:WaitForChild("HumanoidRootPart")local hum=char:WaitForChild("Humanoid")local UI={isOpen=false,isExpanded=true,x=200,y=100,w=500,h=300,minW=200,minH=60,drag={active=false,x=0,y=0},rainbowHue=0,titleHeight=30,tabHeight=35,triggerX=50,triggerY=50,triggerW=120,triggerH=30,currentTab="速度区",tabs={"速度区","搞笑区","其他脚本区","实用区"},flyEnabled=false,flyUIOpen=false,flySpeed=50,flyMinSpeed=10,flyMaxSpeed=200,flyStep=10,flyUI={x=600,y=300,w=220,h=80,drag={active=false,x=0,y=0},speedBarWidth=100,speedBarHeight=10},moveDirection=Vector3.new(0,0,0),touchState={active=false,startY=0,currentY=0}}local sg=Instance.new("ScreenGui")sg.Parent=plr.PlayerGui sg.Name="HUB"sg.IgnoreGuiInset=true sg.ZIndexBehavior=Enum.ZIndexBehavior.Sibling local function clearUI()for _,v in ipairs(sg:GetChildren())do v:Destroy()end end local function hsl2rgb(h,s,l)h=h/360 local r,g,b if s==0 then r,g,b=l,l,l else local function hue2rgb(p,q,t)if t<0 then t=t+1 end if t>1 then t=t-1 end if t<1/6 then return p+(q-p)*6*t end if t<1/2 then return q end if t<2/3 then return p+(q-p)*(2/3-t)*6 end return p end local q=l<0.5 and l*(1+s)or l+s-l*s local p=2*l-q r=hue2rgb(p,q,h+1/3)g=hue2rgb(p,q,h)b=hue2rgb(p,q,h-1/3)end return math.floor(r*255),math.floor(g*255),math.floor(b*255)end local function createFrame(x,y,w,h,r,g,b,a,parent)local f=Instance.new("Frame")f.Parent=parent or sg f.Position=UDim2.new(0,x,0,y)f.Size=UDim2.new(0,w,0,h)f.BackgroundColor3=Color3.fromRGB(r,g,b)f.BackgroundTransparency=1-a f.BorderSizePixel=0 f.ZIndex=2 return f end local function createText(t,x,y,s,r,g,b,a,parent)local l=Instance.new("TextLabel")l.Parent=parent or sg l.Position=UDim2.new(0,x,0,y)l.Size=UDim2.new(0,#t*s+10,0,s+4)l.Text=t l.TextColor3=Color3.fromRGB(r,g,b)l.TextTransparency=1-a l.BackgroundTransparency=1 l.Font=Enum.Font.SourceSansBold l.TextSize=s l.TextXAlignment=Enum.TextXAlignment.Center l.TextYAlignment=Enum.TextYAlignment.Center l.ZIndex=3 return l end function UI:update(dt)if self.isOpen then self.rainbowHue=(self.rainbowHue+dt*80)%360 end if self.flyEnabled and hrp and hum and hum.Health>0 then hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,false)hum:SetStateEnabled(Enum.HumanoidStateType.Jumping,false)hum:SetStateEnabled(Enum.HumanoidStateType.FreeFall,false)hum.GravityScale=0 hum.WalkSpeed=0 local md=self.moveDirection local yd=0 if self.touchState.active then local dy=self.touchState.currentY-self.touchState.startY yd=dy<-20 and 1 or dy>20 and -1 or 0 end local dir=Vector3.new(md.X,yd,md.Z)if dir.Magnitude>0 then dir=dir.Unit end hrp.Velocity=dir*self.flySpeed else if hum then hum.GravityScale=1 hum.WalkSpeed=16 hum:SetStateEnabled(Enum.HumanoidStateType.FallingDown,true)hum:SetStateEnabled(Enum.HumanoidStateType.Jumping,true)hum:SetStateEnabled(Enum.HumanoidStateType.FreeFall,true)end self.moveDirection=Vector3.new(0,0,0)end end function UI:draw()clearUI()local tf=createFrame(self.triggerX,self.triggerY,self.triggerW,self.triggerH,70,70,70,1)createText("HUB",self.triggerX+60,self.triggerY+8,16,255,255,255,1)if not self.isOpen then if self.flyUIOpen then self:drawFlyUI()end return end local cw=self.isExpanded and self.w or self.minW local ch=self.isExpanded and self.h or self.minH local mf=createFrame(self.x,self.y,cw,ch,0,0,0,0.8)local tf=createFrame(self.x,self.y,cw,self.titleHeight,30,30,30,1)local r,g,b=hsl2rgb(self.rainbowHue,0.8,0.5)createText("HUB",self.x+cw-80,self.y+8,16,r,g,b,1)local tt=self.isExpanded and "—"or"+"createText(tt,self.x+15,self.y+8,18,255,255,255,1)createText("×",self.x+cw-25,self.y+8,18,255,80,80,1)if self.isExpanded then local tw=cw/#self.tabs for i,t in ipairs(self.tabs)do local tx=self.x+(i-1)*tw local cr,cg,cb=self.currentTab==t and 60,60,60 or 40,40,40 local tf=createFrame(tx,self.y+self.titleHeight,tw,self.tabHeight,cr,cg,cb,1)createText(t,tx+tw/2,self.y+self.titleHeight+10,14,255,255,255,1)end local cy=self.y+self.titleHeight+self.tabHeight if self.currentTab=="速度区"then createText("飞行",self.x+20,cy+20,16,255,255,255,1)local fb=createFrame(self.x+20,cy+50,100,30,self.flyEnabled and 0,200,0 or 200,0,0,0.8)createText(self.flyEnabled and "开"or"关",self.x+70,cy+65,14,255,255,255,1)else createText("未解锁",self.x+20,cy+20,16,180,180,180,1)end end if self.flyUIOpen then self:drawFlyUI()end end function UI:drawFlyUI()local f=self.flyUI local mf=createFrame(f.x,f.y,f.w,f.h,20,20,20,0.9)local df=createFrame(f.x,f.y,40,f.h,40,40,40,1)createText("⬆️⬅️➡️⬇️",f.x+20,f.y+25,14,255,255,255,1)local cf=createFrame(f.x+f.w-30,f.y,30,30,150,0,0,0.8)createText("×",f.x+f.w-15,f.y+8,16,255,255,255,1)local tf=createFrame(f.x+40,f.y,60,30,self.flyEnabled and 0,200,0 or 180,0,0,0.8)createText(self.flyEnabled and "开"or"关",f.x+70,f.y+8,14,255,255,255,1)local mf=createFrame(f.x+40,f.y+35,20,f.speedBarHeight+4,200,0,0,1)createText("-",f.x+50,f.y+38,14,255,255,255,1)local sb=createFrame(f.x+60,f.y+37,f.speedBarWidth,f.speedBarHeight,60,60,60,1)local sw=(self.flySpeed-self.flyMinSpeed)/(self.flyMaxSpeed-self.flyMinSpeed)*f.speedBarWidth local sf=createFrame(f.x+60,f.y+37,math.max(0,sw),f.speedBarHeight,0,150,255,1)local pf=createFrame(f.x+60+f.speedBarWidth,f.y+35,20,f.speedBarHeight+4,0,200,0,1)createText("+",f.x+70+f.speedBarWidth,f.y+38,14,255,255,255,1)createText(tostring(self.flySpeed),f.x+90,f.y+58,12,255,255,255,1)end function UI:mousePressed(x,y,b)if b~=1 then return end if x>=self.triggerX and x<=self.triggerX+self.triggerW and y>=self.triggerY and y<=self.triggerY+self.triggerH then self.isOpen=not self.isOpen self:draw()return end if self.flyUIOpen then local f=self.flyUI if x>=f.x and x<=f.x+40 and y>=f.y and y<=f.y+f.h then self.flyUI.drag.active=true self.flyUI.drag.x=x-f.x self.flyUI.drag.y=y-f.y self:draw()return end if x>=f.x+f.w-30 and x<=f.x+f.w and y>=f.y and y<=f.y+30 then self.flyUIOpen=false self:draw()return end if x>=f.x+40 and x<=f.x+100 and y>=f.y and y<=f.y+30 then self.flyEnabled=not self.flyEnabled self.flyUIOpen=self.flyEnabled self:draw()return end if x>=f.x+40 and x<=f.x+60 and y>=f.y+35 and y<=f.y+45 then self.flySpeed=math.clamp(self.flySpeed-self.flyStep,self.flyMinSpeed,self.flyMaxSpeed)self:draw()return end if x>=f.x+60+f.speedBarWidth and x<=f.x+80+f.speedBarWidth and y>=f.y+35 and y<=f.y+45 then self.flySpeed=math.clamp(self.flySpeed+self.flyStep,self.flyMinSpeed,self.flyMaxSpeed)self:draw()return end if x>=f.x+60 and x<=f.x+60+f.speedBarWidth and y>=f.y+37 and y<=f.y+47 then local s=math.clamp((x-(f.x+60))/f.speedBarWidth*(self.flyMaxSpeed-self.flyMinSpeed)+self.flyMinSpeed,self.flyMinSpeed,self.flyMaxSpeed)self.flySpeed=math.floor(s)self:draw()return end end if not self.isOpen then return end local cw=self.isExpanded and self.w or self.minW local ch=self.isExpanded and self.h or self.minH if x>=self.x+cw-30 and x<=self.x+cw and y>=self.y and y<=self.y+self.titleHeight then self.isOpen=false self:draw()return end if x>=self.x+5 and x<=self.x+25 and y>=self.y and y<=self.y+self.titleHeight then self.isExpanded=not self.isExpanded self:draw()return end if x>=self.x and x<=self.x+cw and y>=self.y and y<=self.y+self.titleHeight then self.drag.active=true self.drag.x=x-self.x self.drag.y=y-self.y self:draw()return end if self.isExpanded then local tw=cw/#self.tabs for i,t in ipairs(self.tabs)do local tx=self.x+(i-1)*tw if x>=tx and x<=tx+tw and y>=self.y+self.titleHeight and y<=self.y+self.titleHeight+self.tabHeight then self.currentTab=t self:draw()return end end local cy=self.y+self.titleHeight+self.tabHeight if self.currentTab=="速度区"and x>=self.x+20 and x<=self.x+120 and y>=cy+50 and y<=cy+80 then self.flyEnabled=not self.flyEnabled self.flyUIOpen=self.flyEnabled self:draw()return end end end function UI:mouseMoved(x,y)if self.drag.active then self.x=x-self.drag.x self.y=y-self.drag.y self:draw()end if self.flyUI.drag.active then self.flyUI.x=x-self.flyUI.drag.x self.flyUI.y=y-self.flyUI.drag.y self:draw()end end function UI:mouseReleased(x,y,b)if b==1 then self.drag.active=false self.flyUI.drag.active=false self.touchState.active=false end end local function onMove(n,s,o)if not UI.flyEnabled then return end if s==Enum.UserInputState.Change then local x=o.Position.X local z=o.Position.Y UI.moveDirection=Vector3.new(x,0,z)else UI.moveDirection=Vector3.new(0,0,0)end end CAS:BindAction("Move",onMove,false,Enum.PlayerActions.Move)UIS.TouchStarted:Connect(function(i,g)if g or not UI.flyEnabled then return end UI.touchState.active=true UI.touchState.startY=i.Position.Y UI.touchState.currentY=i.Position.Y end)UIS.TouchMoved:Connect(function(i,g)if g or not UI.flyEnabled or not UI.touchState.active then return end UI.touchState.currentY=i.Position.Y end)UIS.TouchEnded:Connect(function(i,g)if not UI.touchState.active then return end UI.touchState.active=false UI.touchState.startY=0 UI.touchState.currentY=0 end)UIS.InputBegan:Connect(function(i,g)if g then return end if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then local p=i.Position UI:mousePressed(p.X,p.Y,1)end end)UIS.InputEnded:Connect(function(i,g)if g then return end if i.UserInputType==Enum.UserInputType.MouseButton1 or i.UserInputType==Enum.UserInputType.Touch then local p=i.Position UI:mouseReleased(p.X,p.Y,1)end end)UIS.MouseMoved:Connect(function(x,y)UI:mouseMoved(x,y)end)UIS.TouchMoved:Connect(function(i,g)if g then return end local p=i.Position UI:mouseMoved(p.X,p.Y)end)char.HumanoidRootPart.Changed:Connect(function(p)if p=="Parent"then hrp=char:FindFirstChild("HumanoidRootPart")end end)plr.CharacterAdded:Connect(function(c)char=c hum=c:WaitForChild("Humanoid")hrp=c:WaitForChild("HumanoidRootPart")end)RS.RenderStepped:Connect(function(dt)UI:update(dt)UI:draw()end)
